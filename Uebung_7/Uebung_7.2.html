<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Übung 7.2</title>
    <link href='https://fonts.googleapis.com/css?family=Noto Sans Mono' rel='stylesheet'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/styles/atom-one-light.min.css">  
    <script type=module src="/main.js"></script>
    <link rel="stylesheet" href="/style.css">
</head>
<body>
    <my-nav></my-nav>
    <div class="pagecontent">
        <h1 class="taskheading" >7.2 Textanalyse mit filter-map-reduce</h1>
        <p class="task">Schreiben Sie in JavaScript eine Textanalyse. Ermitteln Sie die häufigsten Begriffe im Text <a href="https://kaul.inf.h-brs.de/ccm/we/ws23/resources/assets/Plagiatsresolution.html" target="_blank">Plagiatsresolution</a>. Filtern Sie dabei alle <a href="https://de.wikipedia.org/wiki/Stoppwort" target="_blank">Stoppworte</a> und HTML-Tags. Reduzieren Sie das Ergebnis auf die 3 häufigsten Begriffe.

            Hinweis: Eine größere Stoppwort-Liste finden Sie auch unter <a href="https://www.github.com/stopwords-iso/stopwords-de" target="_blank">github.com/stopwords-iso/stopwords-de</a></p>
            <br>
        <h3 class="task">Lösung:</h3>

        <div>
            <pre>
                <code>
    //fetchen hat nicht funktionert, deswegen manuell
    // Nachtrag: Nach der Bearbeitung der Übung 8 sollte klar sein, wie man die stopWords auch fetchen kann (Hinweis: async und AWAIT)
    const stopWords = ["a","ab","aber","ach","acht","achte","achten","achter","achtes","ag","alle","allein","allem","allen","aller","allerdings","alles","allgemeinen","als","also","am","an","ander","andere","anderem","anderen","anderer","anderes","anderm","andern","anderr","anders","au","auch","auf","aus","ausser","ausserdem","außer","außerdem","b","bald","bei","beide","beiden","beim","beispiel","bekannt","bereits","besonders","besser","besten","bin","bis","bisher","bist","c","d","d.h","da","dabei","dadurch","dafür","dagegen","daher","dahin","dahinter","damals","damit","danach","daneben","dank","dann","daran","darauf","daraus","darf","darfst","darin","darum","darunter","darüber","das","dasein","daselbst","dass","dasselbe","davon","davor","dazu","dazwischen","daß","dein","deine","deinem","deinen","deiner","deines","dem","dementsprechend","demgegenüber","demgemäss","demgemäß","demselben","demzufolge","den","denen","denn","denselben","der","deren","derer","derjenige","derjenigen","dermassen","dermaßen","derselbe","derselben","des","deshalb","desselben","dessen","deswegen","dich","die","diejenige","diejenigen","dies","diese","dieselbe","dieselben","diesem","diesen","dieser","dieses","dir","doch","dort","drei","drin","dritte","dritten","dritter","drittes","du","durch","durchaus","durfte","durften","dürfen","dürft","e","eben","ebenso","ehrlich","ei","ei,","eigen","eigene","eigenen","eigener","eigenes","ein","einander","eine","einem","einen","einer","eines","einig","einige","einigem","einigen","einiger","einiges","einmal","eins","elf","en","ende","endlich","entweder","er","ernst","erst","erste","ersten","erster","erstes","es","etwa","etwas","euch","euer","eure","eurem","euren","eurer","eures","f","folgende","früher","fünf","fünfte","fünften","fünfter","fünftes","für","g","gab","ganz","ganze","ganzen","ganzer","ganzes","gar","gedurft","gegen","gegenüber","gehabt","gehen","geht","gekannt","gekonnt","gemacht","gemocht","gemusst","genug","gerade","gern","gesagt","geschweige","gewesen","gewollt","geworden","gibt","ging","gleich","gott","gross","grosse","grossen","grosser","grosses","groß","große","großen","großer","großes","gut","gute","guter","gutes","h","hab","habe","haben","habt","hast","hat","hatte","hatten","hattest","hattet","heisst","her","heute","hier","hin","hinter","hoch","hätte","hätten","i","ich","ihm","ihn","ihnen","ihr","ihre","ihrem","ihren","ihrer","ihres","im","immer","in","indem","infolgedessen","ins","irgend","ist","j","ja","jahr","jahre","jahren","je","jede","jedem","jeden","jeder","jedermann","jedermanns","jedes","jedoch","jemand","jemandem","jemanden","jene","jenem","jenen","jener","jenes","jetzt","k","kam","kann","kannst","kaum","kein","keine","keinem","keinen","keiner","keines","kleine","kleinen","kleiner","kleines","kommen","kommt","konnte","konnten","kurz","können","könnt","könnte","l","lang","lange","leicht","leide","lieber","los","m","machen","macht","machte","mag","magst","mahn","mal","man","manche","manchem","manchen","mancher","manches","mann","mehr","mein","meine","meinem","meinen","meiner","meines","mensch","menschen","mich","mir","mit","mittel","mochte","mochten","morgen","muss","musst","musste","mussten","muß","mußt","möchte","mögen","möglich","mögt","müssen","müsst","müßt","n","na","nach","nachdem","nahm","natürlich","neben","nein","neue","neuen","neun","neunte","neunten","neunter","neuntes","nicht","nichts","nie","niemand","niemandem","niemanden","noch","nun","nur","o","ob","oben","oder","offen","oft","ohne","ordnung","p","q","r","recht","rechte","rechten","rechter","rechtes","richtig","rund","s","sa","sache","sagt","sagte","sah","satt","schlecht","schluss","schon","sechs","sechste","sechsten","sechster","sechstes","sehr","sei","seid","seien","sein","seine","seinem","seinen","seiner","seines","seit","seitdem","selbst","sich","sie","sieben","siebente","siebenten","siebenter","siebentes","sind","so","solang","solche","solchem","solchen","solcher","solches","soll","sollen","sollst","sollt","sollte","sollten","sondern","sonst","soweit","sowie","später","startseite","statt","steht","suche","t","tag","tage","tagen","tat","teil","tel","tritt","trotzdem","tun","u","uhr","um","und","uns","unse","unsem","unsen","unser","unsere","unserer","unses","unter","v","vergangenen","viel","viele","vielem","vielen","vielleicht","vier","vierte","vierten","vierter","viertes","vom","von","vor","w","wahr","wann","war","waren","warst","wart","warum","was","weg","wegen","weil","weit","weiter","weitere","weiteren","weiteres","welche","welchem","welchen","welcher","welches","wem","wen","wenig","wenige","weniger","weniges","wenigstens","wenn","wer","werde","werden","werdet","weshalb","wessen","wie","wieder","wieso","will","willst","wir","wird","wirklich","wirst","wissen","wo","woher","wohin","wohl","wollen","wollt","wollte","wollten","worden","wurde","wurden","während","währenddem","währenddessen","wäre","würde","würden","x","y","z","z.b","zehn","zehnte","zehnten","zehnter","zehntes","zeit","zu","zuerst","zugleich","zum","zunächst","zur","zurück","zusammen","zwanzig","zwar","zwei","zweite","zweiten","zweiter","zweites","zwischen","zwölf","über","überhaupt","übrigens"];
    
    const url = 'https://kaul.inf.h-brs.de/ccm/we/ws23/resources/assets/Plagiatsresolution.html';
    
    // Fetch-Anfrage durchführen (Hilfe : https://www.codeindotnet.com/read-text-files-from-url-javascript-jquery/ und Screencast des LiveCoding)
    fetch(url)
        .then(response => {
            if (!response.ok) {
                throw new Error(`HTTP error! Status: ${response.status}`);
            }
            // Den Antworttext als JSON oder Text extrahieren
            return response.text();
        })
        .then(text => {
            const result = analyzeText(text);
            console.log(result);
        })
        .catch(error => {
            console.error('Fetch error:', error);
        });
    
    
    // Funktion zum Tokenisieren des Textes
    function deletetags(text) {
        // Entfernen von HTML-Tags (einfach, aber nicht perfekt)
        const withoutTags = text.replace(/<[^>]*>/g, '');
        const words = withoutTags.split(/\s+/);     // Aufteilen in Wörter
        return words.map(word => word.toLowerCase().replace(/[^a-zA-Z0-9]/g, ''));      // Kleinschreibung und entfernen von Sonderzeichen
    }
    
    // Funktion zum Entfernen von Stoppwörtern
    function removeStopWords(words) {
        // const stopWords = fetchjson();
        return words.filter(word => !stopWords.includes(word));
    }
    
    
    function countWords(words) {
        const wordCount = {};
    
        words.forEach(word => {
            if (wordCount[word]) {
                wordCount[word]++;
            } else {
                wordCount[word] = 1;
            }
        });
    
        return wordCount;
    }
    
    
    // Hauptfunktion für Textanalyse
    function analyzeText(text) {
        const words = deletetags(text);
        const filteredWords = removeStopWords(words);
        const wordCount = countWords(filteredWords);
    
        // Sortiere die Wörter nach ihrer Häufigkeit in absteigender Reihenfolge
        const sortedWords = Object.keys(wordCount).sort((a, b) => wordCount[b] - wordCount[a]);
    
        const top3Words = sortedWords.slice(0, 3);
    
        return top3Words.map(word => ({ word, count: wordCount[word] }));
    }
    
    
                                    
                </code>
            </pre>
        </div>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.4.0/highlight.min.js"></script>
    <script>hljs.highlightAll();</script>
</body>
</html>